CREATE TABLE account (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
   updated_at TIMESTAMP WITHOUT TIME ZONE,
   username VARCHAR(255),
   email VARCHAR(255),
   password VARCHAR(16),
   is_enabled BOOLEAN NOT NULL,
   CONSTRAINT pk_account PRIMARY KEY (id)
);

CREATE TABLE budget (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
   updated_at TIMESTAMP WITHOUT TIME ZONE,
   amount DECIMAL NOT NULL,
   month SMALLINT NOT NULL,
   year SMALLINT NOT NULL,
   category_id BIGINT NOT NULL,
   CONSTRAINT pk_budget PRIMARY KEY (id)
);

CREATE TABLE category (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
   updated_at TIMESTAMP WITHOUT TIME ZONE,
   name VARCHAR(255),
   CONSTRAINT pk_category PRIMARY KEY (id)
);

CREATE TABLE transaction (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   transaction_type VARCHAR(31),
   created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
   updated_at TIMESTAMP WITHOUT TIME ZONE,
   name VARCHAR(255),
   details VARCHAR(255),
   amount DECIMAL NOT NULL,
   category_id BIGINT NOT NULL,
   CONSTRAINT pk_transaction PRIMARY KEY (id)
);

ALTER TABLE account ADD CONSTRAINT uc_account_email UNIQUE (email);

ALTER TABLE account ADD CONSTRAINT uc_account_username UNIQUE (username);

ALTER TABLE category ADD CONSTRAINT uc_category_name UNIQUE (name);

ALTER TABLE budget ADD CONSTRAINT FK_BUDGET_ON_CATEGORY FOREIGN KEY (category_id) REFERENCES category (id);

ALTER TABLE transaction ADD CONSTRAINT FK_TRANSACTION_ON_CATEGORY FOREIGN KEY (category_id) REFERENCES category (id);